{
  "version": "1.0.0",
  "title": "Chaos Experiment for Distributed Systems Containers",
  "description": "Simulating chaos scenarios for frontend and backend containers",
  "method": [
    {
      "name": "check_containers_running_before_chaos",
      "type": "probe",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "ps",
          "--filter", "name=sistemas_distribuidos-frontend-1",
          "--filter", "name=sistemas_distribuidos-backend-1"
        ]
      },
      "tolerance": {
        "type": "probe",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-frontend-1", 
          "sistemas_distribuidos-backend-1"
        ]
      }
    },
    {
      "name": "inject_network_latency_on_frontend",
      "type": "action",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "exec", "sistemas_distribuidos-frontend-1",
          "tc", "qdisc", "add", "dev", "eth0", 
          "root", "netem", "delay", "1000ms", "500ms"
        ]
      }
    },
    {
      "name": "check_frontend_status_during_latency",
      "type": "probe",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-frontend-1"
        ]
      },
      "tolerance": {
        "type": "probe",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-frontend-1"
        ]
      }
    },
    {
      "name": "stop_backend_container",
      "type": "action",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "stop", "sistemas_distribuidos-backend-1"
        ]
      }
    },
    {
      "name": "check_frontend_status_during_backend_crash",
      "type": "probe",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-frontend-1"
        ]
      },
      "tolerance": {
        "type": "probe",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-frontend-1"
        ]
      }
    },
    {
      "name": "restart_backend_container",
      "type": "action",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "start", "sistemas_distribuidos-backend-1"
        ]
      }
    },
    {
      "name": "check_backend_status_after_restart",
      "type": "probe",
      "provider": {
        "type": "process",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-backend-1"
        ]
      },
      "tolerance": {
        "type": "probe",
        "path": "docker",
        "arguments": [
          "inspect", "-f", "{{.State.Running}}", 
          "sistemas_distribuidos-backend-1"
        ]
      }
    }
  ]
}
